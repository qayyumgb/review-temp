<div class="reviewFact__inner p1rem p-rel reviewFact__Prebuild">
  <div class="reviewFact__inner__left scrollbox">
    <div class="d-flex justify-content-between">
      <div>
        <h3 class="m0">Index Factsheet: <span class="ind-name">{{selIndexName}}</span></h3>
        <p>
          <span class="perfDate">
            Performance as of:
            <span style="color: var(--leftSideText-B);">
              <b>{{asOfDate}}</b>
            </span>
          </span>
        </p>
      </div>
      @if(indexType == "index"){
      <div class="reviewFact__dropdown">
        <div class="reviewFact__dropdown_button">
          <span class="selectOptions">
            <svg _ngcontent-ng-cli-universal-c173="" fill="none" height="13" viewBox="0 0 24 24" width="13"
                 xmlns="http://www.w3.org/2000/svg" style="position: relative;">
              <path _ngcontent-ng-cli-universal-c173=""
                    d="M4.7 17.3V7.7C4.7 6.59543 5.59543 5.7 6.7 5.7H9.8C10.2694 5.7 10.65 5.31944 10.65 4.85C10.65 4.38056 10.2694 4 9.8 4H5C3.89543 4 3 4.89543 3 6V19C3 20.1046 3.89543 21 5 21H18C19.1046 21 20 20.1046 20 19V14.2C20 13.7306 19.6194 13.35 19.15 13.35C18.6806 13.35 18.3 13.7306 18.3 14.2V17.3C18.3 18.4046 17.4046 19.3 16.3 19.3H6.7C5.59543 19.3 4.7 18.4046 4.7 17.3Z"
                    fill="currentColor" opacity="1"></path>
              <rect _ngcontent-ng-cli-universal-c173="" fill="currentColor" height="2" rx="1"
                    transform="rotate(135 21.9497 3.46448)" width="13" x="21.9497" y="3.46448"></rect>
              <path _ngcontent-ng-cli-universal-c173=""
                    d="M19.8284 4.97161L19.8284 9.93937C19.8284 10.5252 20.3033 11 20.8891 11C21.4749 11 21.9497 10.5252 21.9497 9.93937L21.9497 3.05029C21.9497 2.498 21.502 2.05028 20.9497 2.05028L14.0607 2.05027C13.4749 2.05027 13 2.52514 13 3.11094C13 3.69673 13.4749 4.17161 14.0607 4.17161L19.0284 4.17161C19.4702 4.17161 19.8284 4.52978 19.8284 4.97161Z"
                    fill="currentColor"></path>
            </svg>
            Export
          </span>
          <span class="selecticons dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="true">
            <span class="material-icons">
              expand_more
            </span>
          </span>
          <div class="dropdown-menu" x-placement="bottom-start">
            <ul>
              <li class="justify-content-between" (click)="$event.stopPropagation();downloadPDF()">
                <!--{{showLoad ? 'Downloading...': ' Index Factsheet'}}-->
                Index Factsheet
                <span *ngIf="showLoad" class="spinner-border ml-05 spinner-border-sm mr-05" role="status" aria-hidden="true"></span>
              </li>

              @if(sharedData.checkMenuPer(4,2273) == 'Y' && showFixedIncome){
              <li class="justify-content-between" (click)="$event.stopPropagation();downloadMonthEndPDF()">
                Monthly Index Factsheet
                <span *ngIf="showLoad5" class="spinner-border ml-05 spinner-border-sm mr-05" role="status" aria-hidden="true"></span>
              </li>
              }@else if(sharedData.checkMenuPer(4,2273) == 'D' && showFixedIncome){
              <li class="disabled">Monthly Index Factsheet</li>
              }
              @if(sharedData.checkMenuPer(4,3282) == 'Y'){
              <li class="justify-content-between" (click)="$event.stopPropagation();downloadExcel()">
                <!--{{showLoad2 ? 'Downloading...': ' Monthly Returns & Holdings'}}-->
                Monthly Returns & Holdings
                <span *ngIf="showLoad2" class="spinner-border ml-05 spinner-border-sm mr-05" role="status" aria-hidden="true"></span>
              </li>
              }@else if(sharedData.checkMenuPer(4,3282) == 'D'){
              <li class="disabled">Monthly Returns & Holdings</li>
              }
              @if(sharedData.checkMenuPer(4,2262) == 'Y'){
              <li class="justify-content-between" *ngIf="ReturnsHistorymenuflag" (click)="$event.stopPropagation();downloadReturnsExcel()">
                <!--{{showLoad3 ? 'Downloading...': ' Returns History'}}-->
                Returns History
                <span *ngIf="showLoad3" class="spinner-border ml-05 spinner-border-sm mr-05" role="status" aria-hidden="true"></span>
              </li>
              }@else if(sharedData.checkMenuPer(4,2262) == 'D'){
              <li class="disabled">Returns History</li>
              }

              @if(sharedData.checkMenuPer(4,2263) == 'Y'){
              <li class="justify-content-between" *ngIf="HoldingsHistorymenuflag" (click)="$event.stopPropagation();downloadHoldingsExcel()">
                <!--{{showLoad4 ? 'Downloading...': ' Holdings History'}}-->
                Holdings History
                <span *ngIf="showLoad4" class="spinner-border ml-05 spinner-border-sm mr-05" role="status" aria-hidden="true"></span>
              </li>
              }@else if(sharedData.checkMenuPer(4,2263) == 'D'){
              <li class="disabled">Holdings History </li>
              }

            </ul>
          </div>
        </div>
      </div>
      }
    </div>
    <div class="scrollableDiv scrollbox">
      <div class="reviewFact__inner__table p1rem mb1rem">
        <!-- Performance Annualized Trailing Returns -->
        <div>
          <div class="reviewFact__inner__table_title mb1rem">
            <span class="title">Performance Annualized Trailing Returns (Gross of fees) </span>
          </div>
          <div class="reviewFact__inner__table_data reviewFactPerformance overflow_auto">
            <table class="table-grid">
              <tbody>
                <tr class="table-grid-row">
                  <td>
                    Product Name
                  </td>
                  <td>YTD</td>
                  <td>1 Year</td>
                  <td>3 Years</td>
                  <td>5 Years</td>
                  <!--<td>7 Years</td>-->
                  <td>10 Years</td>
                </tr>
                <tr class="table-grid-row" *ngIf="indexperformanceData.length>0 && indexType=='index'">
                  <td>
                    <span class="d-flex">
                      <span class="ellips">{{indexperformanceData[0]['IndexName'].replace('New Age Alpha ', '')| nullDashPipe:''}}</span>
                    </span>
                  </td>
                  <td>{{indexperformanceData[0]['YTDReturn'] | weightFormat:'per'}}</td>
                  <td>{{indexperformanceData[0]['Y1Return'] | weightFormat:'per'}}</td>
                  <td>{{indexperformanceData[0]['Y3Return'] | weightFormat:'per'}}</td>
                  <td>{{indexperformanceData[0]['Y5Return'] | weightFormat:'per'}}</td>
                  <!--<td>{{indexperformanceData[0]['Y7Return'] | weightFormat:'per'}}</td>-->
                  <td>{{indexperformanceData[0]['Y10Return'] | weightFormat:'per'}}</td>
                </tr>

                <tr class="table-grid-row" *ngIf="factsheetPerfData.length>0 && indexType=='strategy'">
                  <td>
                    <span class="d-flex">
                      <span class="ellips">{{cusindexName.replace('New Age Alpha ', '')}}</span>
                    </span>
                  </td>
                  <td>{{factsheetPerfData[0]['ytdReturn'] | percentFormat}}</td>
                  <td>{{factsheetPerfData[0]['y1Return'] | percentFormat}}</td>
                  <td>{{factsheetPerfData[0]['y3Return'] | percentFormat}}</td>
                  <td>{{factsheetPerfData[0]['y5Return'] | percentFormat}}</td>
                  <!--<td>{{factsheetPerfData[0]['y7Return'] | percentFormat}}</td>-->
                  <td>{{factsheetPerfData[0]['y10Return'] | percentFormat}}</td>
                </tr>
                <tr class="table-grid-row" *ngIf="indexperformanceData.length>1 && indexType=='index'">
                  <td>
                    <span class="d-flex">
                      <span class="ellips">{{preBuiltService.getBMIndexName(indexperformanceData[1]).replace('New Age Alpha ', '')| nullDashPipe:''}}</span>
                    </span>
                  </td>
                  <td>{{indexperformanceData[1]['YTDReturn'] | weightFormat:'per'}}</td>
                  <td>{{indexperformanceData[1]['Y1Return'] | weightFormat:'per'}}</td>
                  <td>{{indexperformanceData[1]['Y3Return'] | weightFormat:'per'}}</td>
                  <td>{{indexperformanceData[1]['Y5Return'] | weightFormat:'per'}}</td>
                  <!--<td>{{indexperformanceData[1]['Y7Return'] | weightFormat:'per'}}</td>-->
                  <td>{{indexperformanceData[1]['Y10Return'] | weightFormat:'per'}}</td>
                </tr>

              </tbody>
            </table>
          </div>
        </div>
        <!-- Performance Annualized Trailing Returns End -->
        <!-- Calendar Year Returns -->
        <div class="mt2rem position-relative">
          <div class="reviewFact__inner__table_title mb1rem">
            <span class="title">Calendar Year Returns (Gross of fees) </span>
            <div id="tableNavBuy" class="text-right tableNav">
              <a class="nav-prev arrow scrollBtn" id="leftNav">
                <span class="material-icons" (click)="scrollLeft()">chevron_left</span>
              </a>
              <a class="nav-next arrow ml0_5rem" id="rightNav" (click)="scrollRight()">
                <span class="material-icons">chevron_right</span>
              </a>
            </div>
          </div>
          <div class="reviewFact__inner__table_data reviewFact__inner__table_fixed_data" #widgetsContent (scroll)="onScroll($event)">
            <table class="table-grid" *ngIf="perfData.years.length>0">
              <tbody *ngIf="indexType=='index'">
                <tr class="table-grid-row" style="border-bottom: 3px solid var(--border);">
                  <td [class.wi_4r]="i>0" *ngFor="let data of perfData.years; let i = index">{{data['year']}}</td>
                </tr>
                <tr class="table-grid-row" *ngIf="checkNull(perfData.years,'perfVal')">
                  <td [class.wi_4r]="i>0" *ngFor="let data of perfData.years; let i = index" class="secoundChildtd secoundChildtd1">{{data['perfVal'].replace('New Age Alpha ', '')}}</td>
                </tr>
                <tr class="table-grid-row" *ngIf="checkNull(perfData.years,'BMVal')">
                  <td [class.wi_4r]="i>0" *ngFor="let data of perfData.years; let i = index">{{data['BMVal'].replace('New Age Alpha ', '')}}</td>
                </tr>


              </tbody>
              <tbody *ngIf="indexType=='strategy'">
                <tr class="table-grid-row" style="border-bottom: 3px solid var(--border);">
                  <td>Product Name</td>
                  <td class="wi_4r" *ngFor="let d of perfData.years">{{d}}</td>
                </tr>
                <tr class="table-grid-row" *ngIf="checkEmptyObj(perfData.Uindex)">
                  <td><span class="d-flex"><span class="ellips">{{cusindexName}}</span></span></td>
                  <td class="wi_4r" *ngFor="let d of perfData.years">{{perfData.Uindex[d] | weightFormat :'per'}}</td>
                </tr>
                <tr class="table-grid-row" *ngIf="checkEmptyObj(perfData.ETFind)">
                  <td><span class="d-flex"><span class="ellips">{{cusindexName}}</span></span></td>
                  <td class="wi_4r" *ngFor="let d of perfData.years">{{perfData.ETFind[d] | weightFormat :'per'}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <!-- Calendar Year Returns End-->
      </div>

      @if(showFixedIncome){
      <!-- Portfolio Statistics-->
      <div class="reviewFact__inner__table p1rem mb1rem">
        <div class="position-relative">
          <div class="reviewFact__inner__table_title mb1rem">
            <span class="title">Portfolio Statistics</span>
            <span class="perfDate" *ngIf="fsIndexPerformance.length>0">As of {{fsIndexPerformance[0]['date'] | nullDashPipe:''}}</span>
          </div>
          <div class="reviewFact__inner__table_data  reviewFact__inner__table_data_portfolio overflow_auto" *ngIf="indexType=='index'">
            <table class="table-grid">
              <tbody>
                <tr class="table-grid-row" style="border-bottom: 3px solid var(--border);">
                  <td>Average Effective Duration</td>
                  <td>Yield to Maturity</td>
                  <td>Yield to Worst</td>
                  <td>Sharpe Ratio</td>
                  <td>Up Capture</td>
                  <td>Down Capture</td>
                </tr>
                <tr class="table-grid-row" *ngIf="fsIndexPerformance.length>0">
                  <td>{{fsIndexPerformance[0]['avgEffDuration']| numValueFormat}}</td>
                  <td>{{fsIndexPerformance[0]['yieldtoMaturity']| percentFormat}}</td>
                  <td>{{fsIndexPerformance[0]['yieldtoWorst']| percentFormat}}</td>
                  <td>{{fsIndexPerformance[0]['sharpeRatio']| numValueFormat}}</td>
                  <td>{{fsIndexPerformance[0]['upCapture']| weightFormat :'per'}}</td>                  
                  <td>{{fsIndexPerformance[0]['downCapture']| weightFormat :'per'}}</td>                  
                </tr>
              </tbody>
            </table>
          </div>         
        </div>
      </div>
      <!-- Portfolio Statistics End-->
      }

      <!-- Portfolio Characteristics-->
      <div class="reviewFact__inner__table p1rem mb1rem">
        <div class="position-relative">
          <div class="reviewFact__inner__table_title mb1rem">
            <span class="title">Portfolio Characteristics</span>
          </div>        
          <div class="reviewFact__inner__table_data  reviewFact__inner__table_data_portfolio overflow_auto" *ngIf="indexType=='index'">
            <table class="table-grid">
              <tbody>
                <tr class="table-grid-row" style="border-bottom: 3px solid var(--border);">
                  <td>First Value <br>Date</td>
                  <td>Primary <br>Capitalization</td>
                  <td>Geographic <br>Focus</td>
                  <td>Current # of <br>Holdings</td>
                  <td>Benchmark</td>
                  @if(!showFixedIncome){
                  @if(!showFamilyIndex){<td>Batting <br>Average</td>}
                  <td>Standard <br>Deviation</td>
                  }
                  @if(sharedData.nullCheck(fsIndexPerformance[0], 'divYield', false)){<td>Dividend<br>Yield</td>}
                </tr>
                <tr class="table-grid-row" *ngIf="selIndexSector.length>0 && fsIndexPerformance.length>0">
                  <td>{{fsIndexPerformance[0]['firstValueDt']| nullDashPipe:''}}</td>
                  <td>{{selIndexSector[0]['primaryCapitalization']| nullDashPipe:''}}</td>
                  <td>{{selIndexSector[0]['geographicfocus']| nullDashPipe:''}}</td>
                  <td>{{preBuiltService._exclusionCompData.length}}</td>
                  <td>{{selIndexSector[0]['benchMark']| nullDashPipe:''}}</td>
                  @if(!showFixedIncome){
                  @if(!showFamilyIndex){
                  <td>{{fsIndexPerformance[0]['battingAvg'] | numFormatWithDash:'per'}}</td>
                  }
                  <td>{{fsIndexPerformance[0]['stdDeviation'] | numFormatWithDash:'per'}}</td>
                  @if(sharedData.nullCheck(fsIndexPerformance[0], 'divYield', false)){
                  <td>{{fsIndexPerformance[0]['divYield'] | weightFormat:''}}</td>
                  }
                  }
                </tr>
              </tbody>
            </table>
          </div>
          <div class="reviewFact__inner__table_data  reviewFact__inner__table_data_portfolio" *ngIf="indexType=='strategy'">
            <table class="table-grid" *ngIf="factsheetPerfData.length>0">
              <tbody>
                <tr class="table-grid-row" style="border-bottom: 3px solid var(--border);">
                  <td>Annualized <br>Alpha</td>
                  <td>Information <br>Ratio</td>
                  <td>Beta</td>
                  <td>Upside <br>Capture</td>
                  <td>Downside <br>Capture</td>
                  <td>Correlation</td>
                  <td>Batting <br>Average</td>
                  <td>Standard <br>Deviation</td>
                </tr>
                <tr class="table-grid-row" *ngIf="factsheetPerfData.length>0">
                  <td>{{factsheetPerfData[0]['annulaizedAlpha'] | percentFormat}}</td>
                  <td>{{factsheetPerfData[0]['informationRatio'] | numValueFormat}}</td>
                  <td>{{factsheetPerfData[0]['beta'] | percentFormat }}</td>
                  <td>{{factsheetPerfData[0]['upsideCapture'] | percentFormat}}</td>
                  <td>{{factsheetPerfData[0]['downSideCapture'] | percentFormat}}</td>
                  <td>{{factsheetPerfData[0]['correlation'] | percentFormat}}</td>
                  <td>{{factsheetPerfData[0]['battingAverage'] | percentFormat}}</td>
                  <td>{{factsheetPerfData[0]['stdDeviation'] | numValueFormat}}</td>
                </tr>
              </tbody>
            </table>
          </div>         
        </div>
      </div>
      <!-- Portfolio Characteristics End-->
      <!--line Chart start-->
      <div class="reviewFact__inner__table p1rem mb1rem">
        <div class="reviewFact__inner__table_title mb1rem">
          <span class="title">Chart</span>
        </div>
        <div style="width:100%;" id="lineChartBuyModel"></div>
      </div>
      <!--line Chart end-->
      <!-- Top Security Weights-->
      <div class="reviewFact__inner__table p1rem">
        <div class="d-flex justify-content-between overflow_auto">
          <div class="position-relative w-100 pr2rem">
            <div class="reviewFact__inner__table_title mb1rem">
              <span class="title">Top Security Weights</span>
            </div>
            <div class="reviewFact__inner__table_data  reviewFact__inner__table_data_top_security">
              <table class="table-grid">
                <tbody *ngIf="bldMyIndexMntHPortfolioData.length > 0">
                  <tr class="table-grid-row" style="border-bottom: 2px solid var(--border);">
                    <td>Security</td>
                    <td>Weight</td>
                  </tr>
                  <tr class="table-grid-row" *ngFor="let data of bldMyIndexMntHPortfolioData.slice(0, 10)">
                    <td>{{data['compname']}}</td>
                    <td>{{data['indexWeight'] | weightFormat :'per'}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="position-relative w-100">
            <div class="reviewFact__inner__table_title mb1rem">
              <span class="title">Sector Weights</span>
            </div>
            <div  class="prebuildChart">
              <div style="width:90%;height:95%;" id="barChartBuyModel_popup1" class="factsheetChartresize"></div>
            </div>
          </div>
        </div>

      </div>
      <!-- Top Security Weights End-->
    </div>

  </div>
  <div class="reviewFact__inner__right pl1rem"  [class.open]="isOpen">
    @if(isOpen){
    <span class="reviewFact__inner__right_components_toggle icon_close" (click)="toggleSidebar()">
      <i class="fa-solid fa-xmark"></i>

    </span>
    }
    @else{

    <span class="reviewFact__inner__right_components_toggle icon_comp" (click)="toggleSidebar()">
      <!-- <i  [ngClass]="iconClass"></i> -->
      <span class="material-icons-outlined" style="transform: rotate(45deg);font-size: 1rem;"> attach_file </span>
      <p>Components</p>
    </span>
    }

    <div class="top__section lh_D">
      <div class="d-flex justify-content-between">
        <span class="head">
          <ng-container *ngIf="top10HoldingCheck()">Top 10 Components</ng-container>
          <ng-container *ngIf="!top10HoldingCheck()">Components</ng-container>
          <span *ngIf="!top10HoldingCheck()" class="count" style="">{{bldMyIndexMntHPortfolioData.length}}</span>
        </span>
        @if(sharedData.checkMenuPer(4, 108) == 'Y' && sharedData.checkShowLeftTab(4) == 'A'){
        <button class="dialog_btn_P D_btn d-flex align-items-center" (click)="download()">
          <span class="material-icons">download</span> <span class="downHide">Download</span>
        </button>
        }
        @else if(sharedData.checkMenuPer(4, 108) == 'D' && sharedData.checkShowLeftTab(4) == 'A'){
        <button class="dialog_btn_P D_btn d-flex align-items-center disabled">
          <span class="material-icons">download</span> <span class="downHide">Download</span>
        </button>
        }

      </div><span class="perfDate"> Price as of: <span> {{asOfPrice | date: 'MM/dd/yyyy'}}</span></span>
    </div>
    <div class="bottom__section mt0_5rem scrollbox" *ngIf="bldMyIndexMntHPortfolioData.length>0">
      @for(data of bldMyIndexMntHPortfolioData;track data){
      <div class="list__view">
        <p class="ind__name">{{data['compname'] | nullDashPipe:''}}</p>
        <div class="d-flex align-items-center">
          <span class="ticker text-left">{{data['ticker']}}</span>
          <span class="price text-right" style="color: var(--paraFontColorAlt); ">{{data['price'] | priceFormat  :',.2f':data['currency']}}</span>
          <span class="price text-right">{{data['indexWeight'] | weightFormat :'per'}}</span>
          <div>
          </div>
        </div>
      </div>
      }@empty{ }
    </div>
  </div>
</div>
